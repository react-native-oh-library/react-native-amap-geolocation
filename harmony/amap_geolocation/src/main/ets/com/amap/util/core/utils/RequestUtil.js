import h30 from '@ohos.deviceInfo'; import HashMap from '@ohos.util.HashMap'; import d27 from './TimeUtil'; import { AppInfo } from './AppInfo'; import { MD5 } from './MD5'; import { Constants } from './Constants'; import { g20 } from './SDKInfoUtil'; import { DeviceInfo } from '../DeviceInfo'; import { Utils } from './Utils'; export class r10 { static q10(d41, context) { const e41 = AppInfo.getPackageName(context); const f41 = r10.u36(d41); const g41 = f41.join('&'); let h41 = d27.v36(); let currentTime; return h41.then((time) => { currentTime = time; return r10.w36(g41, time, e41).then(); }).then(k41 => { let l41 = new HashMap(); if (currentTime.length > 0) { l41.set('ts', currentTime); } if (k41 && k41.length > 0) { l41.set('scode', k41); } return new Promise((n41) => { n41(l41); }); }); } static u36(x40) { let y40 = new Array(); x40.forEach((value, key) => { let c41 = key + '=' + value; y40.push(c41); }); const z40 = y40.sort((a, b) => { if (a < b) { return -1; } else if (a > b) { return 1; } else { return 0; } }); return z40; } static async w36(o40, timestamp, p40) { if (timestamp.length > 3) { const s40 = p40 ? p40 : ''; const t40 = s40 + ':' + timestamp.slice(0, timestamp.length - 3) + ':' + o40; let u40 = await MD5.j15(t40); return new Promise((w40) => { w40(u40); }); } else { return new Promise((r40) => { r40(undefined); }); } } static k11(request) { if (request === undefined || request.header === undefined) { return undefined; } let m40 = Utils.r11(request.header); if (m40 === undefined) { return undefined; } const n40 = m40.get(Constants.x30); const userAgent = m40.get(Constants.b27); if (n40 === undefined && userAgent === undefined) { return undefined; } if (n40 !== undefined && n40.length > 0) { } return r10.x36(userAgent); } static x36(userAgent) { if (userAgent !== undefined && userAgent.length > 0) { const l40 = userAgent.split("_"); if (l40.length > 4) { return l40[3]; } } return undefined; } static l12() { var h40, i40; let manufacture = (h40 = h30.manufacture) !== null && h40 !== void 0 ? h40 : ''; let j40 = (i40 = h30.abiList) !== null && i40 !== void 0 ? i40 : ''; let k40 = 'manufacture=' + manufacture + '&abitype=' + j40; return k40; } static p12(request) { var z39, a40; const b40 = r10.k11(request); if (b40 === undefined || b40.length === 0) { return undefined; } const c40 = g20.y19(b40); if (c40 === undefined) { return undefined; } const d40 = DeviceInfo.platform(); const product = (z39 = c40.r21()) !== null && z39 !== void 0 ? z39 : ''; const e40 = (a40 = c40.getSDKVersion()) !== null && a40 !== void 0 ? a40 : ''; const f40 = Constants.d28; let g40 = 'platform=' + d40 + '&product=' + product + '&sdkversion=' + e40 + '&founversion=' + f40; return g40; } static c27(s39) { var t39, u39, v39; const w39 = 'harmonyos'; const product = (t39 = s39.r21()) !== null && t39 !== void 0 ? t39 : ''; const x39 = (u39 = s39.getSDKVersion()) !== null && u39 !== void 0 ? u39 : ''; const manufacture = (v39 = h30.manufacture) !== null && v39 !== void 0 ? v39 : ''; const deviceId = 'adiu'; let y39 = 'plattype=' + w39 + '&product=' + product + '&version=' + x39 + '&manufacture=' + manufacture + '&deviceId=' + deviceId + '&ccver=' + '1'; return y39; } } export default r10; 