import util from '@ohos.util'; import { DeviceInfo } from '../DeviceInfo'; import { NetManager } from '../net/NetManager'; import { TextUtils } from '../TextUtils'; import { y15 } from './AdiuRequestParam'; import { Base64Util } from '../utils/Base64Util'; import { MD5 } from '../utils/MD5'; import { PreferencesUtil } from '../utils/PreferencesUtil'; const z15 = 1; const a16 = 2; const b16 = 3; const c16 = false; const d16 = "MAAAAAAAAAAAAAAAAAAAAAA"; const e16 = "HYW1hcGFkaXVhbWFwYWRpdWFtYXBhZGl1YW1hcGFkaXU"; export class AdiuManager { constructor(context) { this.f15 = ''; this.g15 = ''; this.h15 = new y15(); this.i15 = context.getApplicationContext(); MD5.j15(Base64Util.k15("RYW1hcF9kZXZpY2VfYWRpdQ")).then((data) => { this.f15 = data; }); } static getInstance(context) { if (!AdiuManager.instance) { AdiuManager.instance = new AdiuManager(context); } return AdiuManager.instance; } async l15() { if (c16) { return this.g15; } if (!TextUtils.isEmpty(this.g15)) { return this.g15; } if (this.i15 == null) { return ""; } this.g15 = await this.m15(this.i15); if (!TextUtils.isEmpty(this.g15)) { return this.g15; } if (this.n15() == null) { return ""; } if (AdiuManager.o15) { return ""; } AdiuManager.o15 = true; this.p15(this.h15); return ""; } async p15(j16) { try { if (j16 !== undefined) { let params = await j16.q15(); let o16 = j16.r15(DeviceInfo.p13(this.i15), "", "", DeviceInfo.q13(this.i15)); o16.then((q16) => { if (!TextUtils.isEmpty(q16)) { let r16 = new util.TextEncoder(); let s16 = r16.encodeInto(q16); let t16 = undefined; NetManager.getInstance() .makeRequestPost(j16.s15(s16, params), this.i15) .then((value) => { t16 = value; let result = j16 === null || j16 === void 0 ? void 0 : j16.t15(this.i15, t16 === null || t16 === void 0 ? void 0 : t16.result); if (!TextUtils.isEmpty(result)) { if (result !== undefined) { return result; } } return ""; }).catch(() => { return ""; }); } }); } } catch (error) { return new Promise((n16) => { n16(""); }); } return new Promise((l16) => { l16(""); }); } u15(context, h16) { this.g15 = h16; MD5.j15((Base64Util.k15("RYW1hcF9kZXZpY2VfYWRpdQ"))).then((data) => { PreferencesUtil.putSync(context, data, h16, true); }); } async m15(context) { if (!AdiuManager.v15) { return ""; } let g16 = ""; try { g16 = await this.w15(context); } catch (error) { } if (TextUtils.isEmpty(g16)) { AdiuManager.v15 = false; return ""; } return g16; } async w15(context) { let f16 = ""; f16 = await this.x15(context); return f16; } async x15(context) { if (context === null) { return ""; } let data = await MD5.j15((Base64Util.k15("RYW1hcF9kZXZpY2VfYWRpdQ"))); let value = PreferencesUtil.getSync(context, data, ""); if (typeof value === 'string') { return value; } else { return ""; } } n15() { return this.h15; } } AdiuManager.o15 = false; AdiuManager.v15 = true; AdiuManager.instance = undefined; 